<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="A tool to create bookmarklets from JavaScript fragments">
    <link href="//cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <title>Bookmarklet Maker</title>
    <style>
        body { background-color: #f8f9fa; }
        .container { margin-top: 20px; }
        .result { margin-top: 20px; }
        .footer-link { margin-top: 20px; font-size: 0.8em; }
    </style>
</head>
<body>
<div class="container">
    <h1>Create Your Bookmarklet</h1>
    <p>This tool allows you to create bookmarklets from JavaScript fragments.</p>
    <p>A <strong>bookmarklet</strong> is a small JavaScript program stored as a URL within a bookmark in a web browser. You can find examples of my bookmarklets <a href="../index.html">here</a>.</p>
    <div class="mb-3">
        <label for="bookmarklet-title" class="form-label">Bookmarklet Title</label>
        <input type="text" class="form-control" id="bookmarklet-title" placeholder="Enter the title of your bookmarklet">
    </div>
    <div class="mb-3">
        <label for="bookmarklet-script" class="form-label">JavaScript Fragment</label>
        <textarea class="form-control" id="bookmarklet-script" rows="5" placeholder="Enter your JavaScript code here..."></textarea>
    </div>
    <button class="btn btn-primary" id="create-bookmarklet">Create Bookmarklet</button>
    <button class="btn btn-secondary" id="example-bookmarklet">Example</button>
    <button class="btn btn-danger" id="clear-script">Clear</button>
    <div class="result" id="result-container" style="display:none;">
        <p>Drag this link to your bookmarks bar: <a id="bookmarklet-link" href="#">Your Bookmarklet</a></p>
        <p>Click on it to execute the bookmarklet on this page.</p>
    </div>
    <p class="footer-link">This page was created from <a href="bookmarkletmaker/prompt.md">prompt.md</a> using <code>chatgpt -m o3-mini -ocf ../exampleactions/chatgptpmcodev.cfg -pf bookmarkletmaker/prompt.md</code>.</p>
</div>
<script>
    document.getElementById('create-bookmarklet').onclick = function() {
        const title = document.getElementById('bookmarklet-title').value;
        const script = document.getElementById('bookmarklet-script').value;
        const link = document.getElementById('bookmarklet-link');
        if (title && script) {
            const bookmarklet = 'javascript:' + encodeURIComponent(script);
            link.setAttribute('href', bookmarklet);
            link.innerText = title;
            document.getElementById('result-container').style.display = 'block';
        }
    };
    document.getElementById('example-bookmarklet').onclick = function() {
        document.getElementById('bookmarklet-title').value = 'Example Bookmarklet';
        document.getElementById('bookmarklet-script').value = "alert('This is an example bookmarklet!');";
        document.getElementById('create-bookmarklet').click();
    };
    document.getElementById('clear-script').onclick = function() {
        document.getElementById('bookmarklet-script').value = '';
        document.getElementById('result-container').style.display = 'none';
    };
    document.getElementById('bookmarklet-script').oninput = function() {
        document.getElementById('result-container').style.display = 'none';
    };
</script>
</body>
</html>
